{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useParams,Link}from'react-router-dom';import axios from'axios';import'../cssfile/ProductDetail.css';// CSS 파일 import\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductDetail(){const{productId}=useParams();const[product,setProduct]=useState(null);const[quantity,setQuantity]=useState(1);useEffect(()=>{const fetchProductDetail=async()=>{try{const numericProductId=Number(productId);const response=await axios.get(`/api/products/${numericProductId}`);setProduct(response.data);}catch(error){console.error(\"상품 정보를 가져오는데 실패했습니다:\",error);}};fetchProductDetail();},[productId]);const formatPrice=price=>{return new Intl.NumberFormat().format(price);};const handleQuantityChange=e=>{const value=Math.max(1,Number(e.target.value));// 최소값 1\nsetQuantity(value);};const handleAddToCart=async()=>{const userId=localStorage.getItem('userId');// 로컬 스토리지에서 사용자 ID 가져오기\nif(!userId){alert(\"로그인이 필요합니다.\");return;}try{const response=await axios.post('/api/cart/add',{userid:userId,productid:product.productid,quantity:quantity});if(response.status===200){alert(`${quantity}개의 ${product.productnum}가 장바구니에 추가되었습니다.`);}}catch(error){console.error(\"장바구니 추가에 실패했습니다:\",error);alert(\"장바구니 추가에 실패했습니다.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"product-detail\",children:product?/*#__PURE__*/_jsxs(\"div\",{className:\"product-container-horizontal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-image-container-horizontal\",children:/*#__PURE__*/_jsx(\"img\",{src:product.imageUrl,alt:product.productnum,className:\"product-image-large\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-info-container-horizontal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-category\",children:/*#__PURE__*/_jsx(\"h3\",{children:product.category})}),/*#__PURE__*/_jsx(\"h2\",{className:\"product-title\",children:product.productnum}),/*#__PURE__*/_jsxs(\"p\",{className:\"product-price\",children:[formatPrice(product.price),\" \\uC6D0\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"product-detail-section\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"product-date\",children:[\"\\uC785\\uACE0\\uC77C: \",product.arrivaldate]})}),/*#__PURE__*/_jsx(\"div\",{className:\"product-detail-section\",children:/*#__PURE__*/_jsx(\"p\",{className:\"product-content\",children:product.content})}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-container-simple\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uC218\\uB7C9: \"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:quantity,onChange:handleQuantityChange,className:\"quantity-input\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"add-to-cart-link\",onClick:handleAddToCart,children:\"\\uC7A5\\uBC14\\uAD6C\\uB2C8 \\uB2F4\\uAE30\"})]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"\\uC0C1\\uD488 \\uC815\\uBCF4\\uB97C \\uBD88\\uB7EC\\uC624\\uB294 \\uC911\\uC785\\uB2C8\\uB2E4...\"})});}export default ProductDetail;","map":{"version":3,"names":["React","useEffect","useState","useParams","Link","axios","jsx","_jsx","jsxs","_jsxs","ProductDetail","productId","product","setProduct","quantity","setQuantity","fetchProductDetail","numericProductId","Number","response","get","data","error","console","formatPrice","price","Intl","NumberFormat","format","handleQuantityChange","e","value","Math","max","target","handleAddToCart","userId","localStorage","getItem","alert","post","userid","productid","status","productnum","className","children","src","imageUrl","alt","category","arrivaldate","content","type","min","onChange","onClick"],"sources":["C:/Users/USER/Desktop/마지막 발표자료/homereactCategory/src/components/ProductDetail.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport '../cssfile/ProductDetail.css'; // CSS 파일 import\r\n\r\nfunction ProductDetail() {\r\n  const { productId } = useParams();\r\n  const [product, setProduct] = useState(null);\r\n  const [quantity, setQuantity] = useState(1);\r\n\r\n  useEffect(() => {\r\n    const fetchProductDetail = async () => {\r\n      try {\r\n        const numericProductId = Number(productId);\r\n        const response = await axios.get(`/api/products/${numericProductId}`);\r\n        setProduct(response.data);\r\n      } catch (error) {\r\n        console.error(\"상품 정보를 가져오는데 실패했습니다:\", error);\r\n      }\r\n    };\r\n\r\n    fetchProductDetail();\r\n  }, [productId]);\r\n\r\n  const formatPrice = (price) => {\r\n    return new Intl.NumberFormat().format(price);\r\n  };\r\n\r\n  const handleQuantityChange = (e) => {\r\n    const value = Math.max(1, Number(e.target.value)); // 최소값 1\r\n    setQuantity(value);\r\n  };\r\n\r\n  const handleAddToCart = async () => {\r\n    const userId = localStorage.getItem('userId'); // 로컬 스토리지에서 사용자 ID 가져오기\r\n\r\n    if (!userId) {\r\n      alert(\"로그인이 필요합니다.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post('/api/cart/add', {\r\n        userid: userId,\r\n        productid: product.productid,\r\n        quantity: quantity\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        alert(`${quantity}개의 ${product.productnum}가 장바구니에 추가되었습니다.`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"장바구니 추가에 실패했습니다:\", error);\r\n      alert(\"장바구니 추가에 실패했습니다.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"product-detail\">\r\n      {product ? (\r\n        <div className=\"product-container-horizontal\">\r\n          {/* 상품 이미지 */}\r\n          <div className=\"product-image-container-horizontal\">\r\n            <img src={product.imageUrl} alt={product.productnum} className=\"product-image-large\" />\r\n          </div>\r\n\r\n          {/* 상품 정보 영역 */}\r\n          <div className=\"product-info-container-horizontal\">\r\n            {/* 카테고리 */}\r\n            <div className=\"product-category\">\r\n              <h3>{product.category}</h3>\r\n            </div>\r\n\r\n            <h2 className=\"product-title\">{product.productnum}</h2>\r\n            <p className=\"product-price\">{formatPrice(product.price)} 원</p>\r\n\r\n            {/* 상품 상세 정보 */}\r\n            <div className=\"product-detail-section\">\r\n              <p className=\"product-date\">입고일: {product.arrivaldate}</p>\r\n            </div>\r\n            <div className=\"product-detail-section\">\r\n              <p className=\"product-content\">{product.content}</p>\r\n            </div>\r\n\r\n            {/* 수량 선택 */}\r\n            <div className=\"quantity-container-simple\">\r\n              <span>수량: </span>\r\n              <input\r\n                type=\"number\"\r\n                min=\"1\"\r\n                value={quantity}\r\n                onChange={handleQuantityChange}\r\n                className=\"quantity-input\"\r\n              />\r\n            </div>\r\n\r\n            {/* 장바구니 담기 */}\r\n            <span className=\"add-to-cart-link\" onClick={handleAddToCart}>\r\n              장바구니 담기\r\n            </span>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <p>상품 정보를 불러오는 중입니다...</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductDetail;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}